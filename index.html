<form id="form">
    <input type="texte" id="outputName" />
    <input type="file" id="files" />
    <input type="submit" />
</form>
<script>
    document.getElementById("form").onsubmit = function (event) {
        var content = new FormData();
        content.append("File", document.getElementById("files").files[0]);
        content.append("outputName", document.getElementById("outputName").value);
        event.preventDefault();
        fetch("/data", {
            method: "POST",
            body: content
        }).then((response) => {
            response.text().then((body) => {
                let header = response.headers.get('Content-Disposition');
                if (header) {
                    name = header.replace(/.*"(.*)"/, "$1");
                }
                download(name, body)
            })
        });
    }
    function download(filename, data) {
        // https://stackoverflow.com/a/33542499/15568835
        var blob = new Blob([data], { type: 'text/csv' });
        if (window.navigator.msSaveOrOpenBlob) {
            window.navigator.msSaveBlob(blob, filename);
        } else {
            var elem = window.document.createElement('a');
            elem.href = window.URL.createObjectURL(blob);
            elem.download = filename;
            document.body.appendChild(elem);
            elem.click();
            document.body.removeChild(elem);
        }
    }
</script>